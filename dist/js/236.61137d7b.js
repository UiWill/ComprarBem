"use strict";(self["webpackChunkcomprar_bem"]=self["webpackChunkcomprar_bem"]||[]).push([[236],{5236:(n,e,t)=>{function a(n,e="Relat√≥rio Consolidado de An√°lise de Pre√ßos"){if(!n||0===n.length)throw new Error("Nenhuma an√°lise encontrada para gerar relat√≥rio");const t=o(n),a=d(n,t,e),r=window.open("","_blank");r?(r.document.write(a),r.document.close(),setTimeout((()=>{r.focus()}),500)):i(a,`relatorio_analise_precos_${(new Date).toISOString().split("T")[0]}.html`)}function o(n){const e=n.filter((n=>"concluida"===n.status));if(0===e.length)return{totalAnalises:n.length,analisesCompletas:0,precoMedioGeral:0,menorPreco:0,maiorPreco:0,desvioMedio:0,totalOutliers:0,categorias:[],recomendacoesPrincipais:[]};const t=e.filter((n=>n.preco_medio)).map((n=>n.preco_medio)),a=e.map((n=>n.outliers_detectados||0)).reduce(((n,e)=>n+e),0),o=e.filter((n=>n.desvio_padrao)).map((n=>n.desvio_padrao)),d={};e.forEach((n=>{n.categoria&&(d[n.categoria]=(d[n.categoria]||0)+1)}));const i=e.filter((n=>n.recomendacao)).map((n=>n.recomendacao)).slice(0,5);return{totalAnalises:n.length,analisesCompletas:e.length,precoMedioGeral:t.length>0?t.reduce(((n,e)=>n+e),0)/t.length:0,menorPreco:t.length>0?Math.min(...t):0,maiorPreco:t.length>0?Math.max(...t):0,desvioMedio:o.length>0?o.reduce(((n,e)=>n+e),0)/o.length:0,totalOutliers:a,categorias:Object.entries(d).map((([n,e])=>({nome:n,count:e}))),recomendacoesPrincipais:i}}function d(n,e,t){const a=new Date,o=a.toLocaleDateString("pt-BR"),d=a.toLocaleTimeString("pt-BR");return`\n<!DOCTYPE html>\n<html lang="pt-BR">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${t}</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            background: #f8f9fa;\n            padding: 20px;\n        }\n        \n        .container {\n            max-width: 1000px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        \n        .header {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 30px;\n            text-align: center;\n        }\n        \n        .header h1 {\n            font-size: 28px;\n            margin-bottom: 10px;\n        }\n        \n        .header .meta {\n            opacity: 0.9;\n            font-size: 14px;\n        }\n        \n        .content {\n            padding: 30px;\n        }\n        \n        .section {\n            margin-bottom: 40px;\n        }\n        \n        .section h2 {\n            color: #2c3e50;\n            margin-bottom: 20px;\n            padding-bottom: 10px;\n            border-bottom: 2px solid #e1e5e9;\n            font-size: 20px;\n        }\n        \n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        \n        .stat-card {\n            background: #f8f9fa;\n            border: 1px solid #e9ecef;\n            border-radius: 8px;\n            padding: 20px;\n            text-align: center;\n        }\n        \n        .stat-value {\n            font-size: 24px;\n            font-weight: bold;\n            color: #495057;\n            margin-bottom: 5px;\n        }\n        \n        .stat-label {\n            font-size: 14px;\n            color: #6c757d;\n            text-transform: uppercase;\n            letter-spacing: 0.5px;\n        }\n        \n        .table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n        }\n        \n        .table th,\n        .table td {\n            padding: 12px;\n            text-align: left;\n            border-bottom: 1px solid #dee2e6;\n        }\n        \n        .table th {\n            background: #f8f9fa;\n            font-weight: 600;\n            color: #495057;\n        }\n        \n        .table tr:hover {\n            background: #f8f9fa;\n        }\n        \n        .badge {\n            display: inline-block;\n            padding: 4px 8px;\n            border-radius: 4px;\n            font-size: 12px;\n            font-weight: 500;\n            text-transform: uppercase;\n        }\n        \n        .badge-success {\n            background: #d4edda;\n            color: #155724;\n        }\n        \n        .badge-warning {\n            background: #fff3cd;\n            color: #856404;\n        }\n        \n        .badge-danger {\n            background: #f8d7da;\n            color: #721c24;\n        }\n        \n        .badge-secondary {\n            background: #e2e3e5;\n            color: #383d41;\n        }\n        \n        .recommendations {\n            background: #e7f3ff;\n            border: 1px solid #b8daff;\n            border-radius: 8px;\n            padding: 20px;\n        }\n        \n        .recommendations h3 {\n            color: #004085;\n            margin-bottom: 15px;\n        }\n        \n        .recommendations ul {\n            list-style: none;\n            padding: 0;\n        }\n        \n        .recommendations li {\n            background: white;\n            margin-bottom: 10px;\n            padding: 10px;\n            border-radius: 4px;\n            border-left: 4px solid #007bff;\n        }\n        \n        .footer {\n            background: #f8f9fa;\n            padding: 20px;\n            text-align: center;\n            color: #6c757d;\n            font-size: 14px;\n            border-top: 1px solid #dee2e6;\n        }\n        \n        .btn-print {\n            background: #007bff;\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n            margin: 20px 0;\n        }\n        \n        .btn-print:hover {\n            background: #0056b3;\n        }\n        \n        @media print {\n            body {\n                background: white;\n                padding: 0;\n            }\n            \n            .container {\n                box-shadow: none;\n                border-radius: 0;\n            }\n            \n            .btn-print {\n                display: none;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <h1>üìä ${t}</h1>\n            <div class="meta">\n                Gerado em ${o} √†s ${d}\n            </div>\n        </div>\n        \n        <div class="content">\n            <button class="btn-print" onclick="window.print()">üñ®Ô∏è Imprimir / Salvar PDF</button>\n            \n            \x3c!-- Resumo Executivo --\x3e\n            <div class="section">\n                <h2>üìã Resumo Executivo</h2>\n                <div class="stats-grid">\n                    <div class="stat-card">\n                        <div class="stat-value">${e.totalAnalises}</div>\n                        <div class="stat-label">Total de An√°lises</div>\n                    </div>\n                    <div class="stat-card">\n                        <div class="stat-value">${e.analisesCompletas}</div>\n                        <div class="stat-label">An√°lises Conclu√≠das</div>\n                    </div>\n                    <div class="stat-card">\n                        <div class="stat-value">${r(e.precoMedioGeral)}</div>\n                        <div class="stat-label">Pre√ßo M√©dio Geral</div>\n                    </div>\n                    <div class="stat-card">\n                        <div class="stat-value">${e.totalOutliers}</div>\n                        <div class="stat-label">Outliers Detectados</div>\n                    </div>\n                </div>\n            </div>\n            \n            \x3c!-- An√°lises Detalhadas --\x3e\n            <div class="section">\n                <h2>üìà An√°lises Detalhadas</h2>\n                <table class="table">\n                    <thead>\n                        <tr>\n                            <th>T√≠tulo</th>\n                            <th>Categoria</th>\n                            <th>Status</th>\n                            <th>Pre√ßo M√©dio</th>\n                            <th>Outliers</th>\n                            <th>Data</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${n.map((n=>`\n                            <tr>\n                                <td>${n.titulo||"N/A"}</td>\n                                <td>${n.categoria||"N/A"}</td>\n                                <td>\n                                    <span class="badge ${l(n.status)}">\n                                        ${c(n.status)}\n                                    </span>\n                                </td>\n                                <td>${r(n.preco_medio)}</td>\n                                <td>${n.outliers_detectados||0}</td>\n                                <td>${s(n.created_at)}</td>\n                            </tr>\n                        `)).join("")}\n                    </tbody>\n                </table>\n            </div>\n            \n            \x3c!-- Distribui√ß√£o por Categoria --\x3e\n            ${e.categorias.length>0?`\n            <div class="section">\n                <h2>üìä Distribui√ß√£o por Categoria</h2>\n                <table class="table">\n                    <thead>\n                        <tr>\n                            <th>Categoria</th>\n                            <th>Quantidade</th>\n                            <th>Percentual</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${e.categorias.map((n=>`\n                            <tr>\n                                <td>${n.nome}</td>\n                                <td>${n.count}</td>\n                                <td>${(n.count/e.totalAnalises*100).toFixed(1)}%</td>\n                            </tr>\n                        `)).join("")}\n                    </tbody>\n                </table>\n            </div>\n            `:""}\n            \n            \x3c!-- Recomenda√ß√µes --\x3e\n            ${e.recomendacoesPrincipais.length>0?`\n            <div class="section">\n                <div class="recommendations">\n                    <h3>üí° Principais Recomenda√ß√µes</h3>\n                    <ul>\n                        ${e.recomendacoesPrincipais.map((n=>`\n                            <li>${n}</li>\n                        `)).join("")}\n                    </ul>\n                </div>\n            </div>\n            `:""}\n        </div>\n        \n        <div class="footer">\n            <p>Relat√≥rio gerado automaticamente pelo Sistema CPM - Comprar Bem</p>\n            <p>Dados baseados em ${e.analisesCompletas} an√°lise(s) conclu√≠da(s) de um total de ${e.totalAnalises}</p>\n        </div>\n    </div>\n</body>\n</html>\n  `}function i(n,e){const t=new Blob([n],{type:"text/html;charset=utf-8"}),a=window.URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download=e,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout((()=>{window.URL.revokeObjectURL(a)}),100)}function r(n){return n?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n):"R$ 0,00"}function s(n){return n?new Date(n).toLocaleDateString("pt-BR"):"N/A"}function c(n){const e={pendente:"Pendente",processando:"Processando",concluida:"Conclu√≠da",erro:"Erro",cancelada:"Cancelada"};return e[n]||n}function l(n){const e={pendente:"badge-warning",processando:"badge-secondary",concluida:"badge-success",erro:"badge-danger",cancelada:"badge-secondary"};return e[n]||"badge-secondary"}t.d(e,{gerarRelatorioAnalisePrecos:()=>a})}}]);
//# sourceMappingURL=236.61137d7b.js.map