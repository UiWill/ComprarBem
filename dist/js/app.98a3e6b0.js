(()=>{"use strict";var t={173:(t,a,o)=>{var e=o(471),r=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i=o(656),n={},l=(0,i.A)(n,r,s,!1,null,null,null);const d=l.exports;var c=o(554),u=function(){var t=this,a=t._self._c;return a("div",{staticClass:"home"},[a("Login")],1)},v=[],p=function(){var t=this,a=t._self._c;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-card"},[a("h2",[t._v("Comprar Bem")]),a("p",[t._v("Sistema de Pré-Qualificação e Padronização de Bens")]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("E-mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"email",placeholder:"Seu e-mail",required:""},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("Senha")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Sua senha",required:""},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}})]),a("button",{staticClass:"btn-primary",attrs:{disabled:t.loading},on:{click:t.login}},[t._v(" "+t._s(t.loading?"Entrando...":"Entrar")+" ")]),t.errorMsg?a("p",{staticClass:"error-message"},[t._v(t._s(t.errorMsg))]):t._e()])])},m=[],f=o(17);const h="https://ruagsbbczuwgfflgcaol.supabase.co",_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ1YWdzYmJjenV3Z2ZmbGdjYW9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ0Njg5MDQsImV4cCI6MjA2MDA0NDkwNH0.S2KD6-9DpBYAOsodjibI7LGa04CspZZ5OdRQagNjoK8",g=(0,f.UU)(h,_),C={name:"Login",data(){return{email:"",password:"",loading:!1,errorMsg:""}},methods:{async login(){try{this.loading=!0,this.errorMsg="";const{error:t}=await g.auth.signIn({email:this.email,password:this.password});if(t)throw t;this.$router.push("/dashboard")}catch(t){this.errorMsg=t.message||"Erro ao fazer login"}finally{this.loading=!1}}}},b=C;var y=(0,i.A)(b,p,m,!1,null,"907a2638",null);const w=y.exports,k={name:"Home",components:{Login:w}},P=k;var A=(0,i.A)(P,u,v,!1,null,null,null);const S=A.exports;var D=function(){var t=this,a=t._self._c;return a("div",{staticClass:"dashboard-view"},[a("header",{staticClass:"app-header"},[t._m(0),a("nav",{staticClass:"main-nav"},[a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Cadastrar Produto")]),a("router-link",{attrs:{to:"/catalogo"}},[t._v("Catálogo")]),a("router-link",{attrs:{to:"/feedback"}},[t._v("RDM")])],1),a("div",{staticClass:"user-menu"},[a("button",{staticClass:"btn-logout",on:{click:t.logout}},[t._v("Sair")])])]),a("main",{staticClass:"main-content"},[a("DashboardCPM")],1)])},E=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"logo"},[a("h1",[t._v("Comprar Bem")])])}],x=function(){var t=this,a=t._self._c;return a("div",{staticClass:"dashboard"},[a("h2",[t._v("Dashboard CPM")]),a("div",{staticClass:"stats-container"},[a("div",{staticClass:"stat-card"},[a("h3",[t._v("Produtos Pendentes")]),a("div",{staticClass:"stat-value"},[t._v(t._s(t.pendentes))])]),a("div",{staticClass:"stat-card"},[a("h3",[t._v("Produtos Aprovados")]),a("div",{staticClass:"stat-value"},[t._v(t._s(t.aprovados))])]),a("div",{staticClass:"stat-card"},[a("h3",[t._v("Produtos Reprovados")]),a("div",{staticClass:"stat-value"},[t._v(t._s(t.reprovados))])])]),a("div",{staticClass:"recent-products"},[a("h3",[t._v("Produtos Recentes")]),t.produtos.length>0?a("table",[t._m(0),a("tbody",t._l(t.produtos,(function(o){return a("tr",{key:o.id},[a("td",[t._v(t._s(o.nome))]),a("td",[t._v(t._s(o.marca))]),a("td",[t._v(t._s(o.status))]),a("td",[t._v(t._s(t.formatDate(o.criado_em)))]),a("td",[a("button",{staticClass:"btn-small",on:{click:function(a){return t.verProduto(o.id)}}},[t._v("Ver")])])])})),0)]):a("p",[t._v("Nenhum produto cadastrado.")])])])},N=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("Nome")]),a("th",[t._v("Marca")]),a("th",[t._v("Status")]),a("th",[t._v("Data")]),a("th",[t._v("Ações")])])])}];const q={name:"DashboardCPM",data(){return{produtos:[],pendentes:0,aprovados:0,reprovados:0}},created(){this.carregarDados()},methods:{async carregarDados(){try{const{data:t,error:a}=await g.from("produtos").select("*").order("criado_em",{ascending:!1}).limit(10);if(a)throw a;this.produtos=t||[];const o=await Promise.all([this.contarPorStatus("pendente"),this.contarPorStatus("aprovado"),this.contarPorStatus("reprovado")]);this.pendentes=o[0],this.aprovados=o[1],this.reprovados=o[2]}catch(t){console.error("Erro ao carregar dados:",t)}},async contarPorStatus(t){const{count:a,error:o}=await g.from("produtos").select("id",{count:"exact"}).eq("status",t);return o?(console.error(`Erro ao contar produtos ${t}:`,o),0):a||0},formatDate(t){if(!t)return"";const a=new Date(t);return a.toLocaleDateString("pt-BR")},verProduto(t){this.$router.push(`/analise/${t}`)}}},M=q;var F=(0,i.A)(M,x,N,!1,null,"9d1f7e38",null);const j=F.exports,O={name:"Dashboard",components:{DashboardCPM:j},methods:{async logout(){try{await g.auth.signOut(),this.$router.push("/")}catch(t){console.error("Erro ao fazer logout:",t)}}}},T=O;var $=(0,i.A)(T,D,E,!1,null,"7a3b99e0",null);const L=$.exports;var I=function(){var t=this,a=t._self._c;return a("div",{staticClass:"cadastro-view"},[a("header",{staticClass:"app-header"},[t._m(0),a("nav",{staticClass:"main-nav"},[a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Cadastrar Produto")]),a("router-link",{attrs:{to:"/catalogo"}},[t._v("Catálogo")]),a("router-link",{attrs:{to:"/feedback"}},[t._v("RDM")])],1),a("div",{staticClass:"user-menu"},[a("button",{staticClass:"btn-logout",on:{click:t.logout}},[t._v("Sair")])])]),a("main",{staticClass:"main-content"},[a("CadastroProduto")],1)])},R=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"logo"},[a("h1",[t._v("Comprar Bem")])])}],z=function(){var t=this,a=t._self._c;return a("div",{staticClass:"cadastro-produto"},[a("h2",[t._v("Cadastro de Produto")]),a("form",{on:{submit:function(a){return a.preventDefault(),t.salvarProduto.apply(null,arguments)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nome"}},[t._v("Nome do Produto*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.nome,expression:"produto.nome"}],attrs:{id:"nome",type:"text",required:""},domProps:{value:t.produto.nome},on:{input:function(a){a.target.composing||t.$set(t.produto,"nome",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"categoria"}},[t._v("Categoria*")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.produto.categoria_id,expression:"produto.categoria_id"}],attrs:{id:"categoria",required:""},on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.produto,"categoria_id",a.target.multiple?o:o[0])}}},[a("option",{attrs:{value:""}},[t._v("Selecione...")]),t._l(t.categorias,(function(o){return a("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.nome)+" ")])}))],2)])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"marca"}},[t._v("Marca*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.marca,expression:"produto.marca"}],attrs:{id:"marca",type:"text",required:""},domProps:{value:t.produto.marca},on:{input:function(a){a.target.composing||t.$set(t.produto,"marca",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"modelo"}},[t._v("Modelo*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.modelo,expression:"produto.modelo"}],attrs:{id:"modelo",type:"text",required:""},domProps:{value:t.produto.modelo},on:{input:function(a){a.target.composing||t.$set(t.produto,"modelo",a.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"fabricante"}},[t._v("Fabricante*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.fabricante,expression:"produto.fabricante"}],attrs:{id:"fabricante",type:"text",required:""},domProps:{value:t.produto.fabricante},on:{input:function(a){a.target.composing||t.$set(t.produto,"fabricante",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cnpj"}},[t._v("CNPJ*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.produto.cnpj,expression:"produto.cnpj"}],attrs:{id:"cnpj",type:"text",required:""},domProps:{value:t.produto.cnpj},on:{input:function(a){a.target.composing||t.$set(t.produto,"cnpj",a.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"descricao"}},[t._v("Descrição")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.produto.descricao,expression:"produto.descricao"}],attrs:{id:"descricao",rows:"4"},domProps:{value:t.produto.descricao},on:{input:function(a){a.target.composing||t.$set(t.produto,"descricao",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Documentos")]),a("div",{staticClass:"file-upload"},[a("input",{attrs:{type:"file",multiple:""},on:{change:t.onFileSelect}})]),t.selectedFiles.length>0?a("div",{staticClass:"selected-files"},[a("p",[t._v("Arquivos selecionados:")]),a("ul",t._l(t.selectedFiles,(function(o,e){return a("li",{key:e},[t._v(" "+t._s(o.name)+" ")])})),0)]):t._e()]),a("div",{staticClass:"form-actions"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"Salvando...":"Salvar Produto")+" ")])])])])},B=[];const J={name:"CadastroProduto",data(){return{produto:{nome:"",categoria_id:"",marca:"",modelo:"",fabricante:"",cnpj:"",descricao:"",status:"pendente"},categorias:[],selectedFiles:[],loading:!1}},created(){this.carregarCategorias()},methods:{async carregarCategorias(){try{const{data:t,error:a}=await g.from("categorias").select("*").order("nome");if(a)throw a;this.categorias=t||[]}catch(t){console.error("Erro ao carregar categorias:",t),alert("Erro ao carregar categorias. Por favor, tente novamente.")}},onFileSelect(t){this.selectedFiles=Array.from(t.target.files)},async salvarProduto(){try{this.loading=!0;const{data:t,error:a}=await g.from("produtos").insert([{...this.produto,tenant_id:"123e4567-e89b-12d3-a456-426614174000"}]).select();if(a)throw a;const o=t[0].id;if(this.selectedFiles.length>0){const t=this.selectedFiles.map((t=>this.uploadFile(t,o)));await Promise.all(t)}alert("Produto cadastrado com sucesso!"),this.limparFormulario()}catch(t){console.error("Erro ao salvar produto:",t),alert("Erro ao salvar produto. Por favor, tente novamente.")}finally{this.loading=!1}},async uploadFile(t,a){const o=`${(new Date).getTime()}_${t.name}`,{error:e}=await g.storage.from("documentos").upload(o,t);if(e)throw e;const{data:r}=g.storage.from("documentos").getPublicUrl(o),{error:s}=await g.from("documentos").insert({produto_id:a,tenant_id:"123e4567-e89b-12d3-a456-426614174000",nome:t.name,tipo:t.type,arquivo_url:r.publicUrl});if(s)throw s;return r.publicUrl},limparFormulario(){this.produto={nome:"",categoria_id:"",marca:"",modelo:"",fabricante:"",cnpj:"",descricao:"",status:"pendente"},this.selectedFiles=[]}}},U=J;var V=(0,i.A)(U,z,B,!1,null,"641508e8",null);const Z=V.exports,Y={name:"Cadastro",components:{CadastroProduto:Z},methods:{async logout(){try{await g.auth.signOut(),this.$router.push("/")}catch(t){console.error("Erro ao fazer logout:",t)}}}},G=Y;var Q=(0,i.A)(G,I,R,!1,null,"81cae380",null);const H=Q.exports;var X=function(){var t=this,a=t._self._c;return a("div",{staticClass:"analise-view"},[a("header",{staticClass:"app-header"},[t._m(0),a("nav",{staticClass:"main-nav"},[a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Cadastrar Produto")]),a("router-link",{attrs:{to:"/catalogo"}},[t._v("Catálogo")]),a("router-link",{attrs:{to:"/feedback"}},[t._v("RDM")])],1),a("div",{staticClass:"user-menu"},[a("button",{staticClass:"btn-logout",on:{click:t.logout}},[t._v("Sair")])])]),a("main",{staticClass:"main-content"},[a("AnaliseProduto",{attrs:{id:t.produtoId}})],1)])},K=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"logo"},[a("h1",[t._v("Comprar Bem")])])}],W=function(){var t=this,a=t._self._c;return a("div",{staticClass:"analise-container"},[t.loading?a("div",{staticClass:"loading"},[a("p",[t._v("Carregando...")])]):t.produto?a("div",{staticClass:"produto-analise"},[a("h2",[t._v("Análise de Produto")]),a("div",{staticClass:"produto-info"},[a("h3",[t._v(t._s(t.produto.nome))]),a("div",{staticClass:"info-grid"},[a("div",{staticClass:"info-item"},[a("strong",[t._v("Marca:")]),t._v(" "+t._s(t.produto.marca)+" ")]),a("div",{staticClass:"info-item"},[a("strong",[t._v("Modelo:")]),t._v(" "+t._s(t.produto.modelo)+" ")]),a("div",{staticClass:"info-item"},[a("strong",[t._v("Fabricante:")]),t._v(" "+t._s(t.produto.fabricante)+" ")]),a("div",{staticClass:"info-item"},[a("strong",[t._v("CNPJ:")]),t._v(" "+t._s(t.produto.cnpj)+" ")]),a("div",{staticClass:"info-item full-width"},[a("strong",[t._v("Descrição:")]),t._v(" "+t._s(t.produto.descricao||"Não informada")+" ")]),a("div",{staticClass:"info-item"},[a("strong",[t._v("Status Atual:")]),a("span",{staticClass:"status-pill",class:t.getStatusClass(t.produto.status)},[t._v(" "+t._s(t.produto.status)+" ")])]),a("div",{staticClass:"info-item"},[a("strong",[t._v("Data de Cadastro:")]),t._v(" "+t._s(t.formatDate(t.produto.criado_em))+" ")])])]),t.documentos.length>0?a("div",{staticClass:"documentos-section"},[a("h3",[t._v("Documentos")]),a("div",{staticClass:"documentos-list"},t._l(t.documentos,(function(o){return a("div",{key:o.id,staticClass:"documento-item"},[a("div",{staticClass:"doc-icon"},[t._v("📄")]),a("div",{staticClass:"doc-info"},[a("p",{staticClass:"doc-name"},[t._v(t._s(o.nome))]),a("p",{staticClass:"doc-type"},[t._v(t._s(o.tipo))])]),a("a",{staticClass:"doc-action",attrs:{href:o.arquivo_url,target:"_blank"}},[t._v("Visualizar")])])})),0)]):t._e(),a("div",{staticClass:"analise-form"},[a("h3",[t._v("Parecer Técnico")]),a("form",{on:{submit:function(a){return a.preventDefault(),t.salvarAnalise.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"parecer"}},[t._v("Observações / Parecer")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.analise.parecer,expression:"analise.parecer"}],attrs:{id:"parecer",rows:"4",required:""},domProps:{value:t.analise.parecer},on:{input:function(a){a.target.composing||t.$set(t.analise,"parecer",a.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v("Decisão")]),a("div",{staticClass:"radio-group"},[a("label",{staticClass:"radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.analise.status,expression:"analise.status"}],attrs:{type:"radio",value:"aprovado",required:""},domProps:{checked:t._q(t.analise.status,"aprovado")},on:{change:function(a){return t.$set(t.analise,"status","aprovado")}}}),t._v(" Aprovar ")]),a("label",{staticClass:"radio-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.analise.status,expression:"analise.status"}],attrs:{type:"radio",value:"reprovado",required:""},domProps:{checked:t._q(t.analise.status,"reprovado")},on:{change:function(a){return t.$set(t.analise,"status","reprovado")}}}),t._v(" Reprovar ")])])]),a("div",{staticClass:"form-actions"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.submitting}},[t._v(" "+t._s(t.submitting?"Salvando...":"Salvar Análise")+" ")]),a("button",{staticClass:"btn-secondary",attrs:{type:"button"},on:{click:t.voltar}},[t._v(" Voltar ")])])])]),t.analisesAnteriores.length>0?a("div",{staticClass:"analises-anteriores"},[a("h3",[t._v("Análises Anteriores")]),t._l(t.analisesAnteriores,(function(o){return a("div",{key:o.id,staticClass:"analise-historico"},[a("div",{staticClass:"analise-header"},[a("span",{staticClass:"status-pill",class:t.getStatusClass(o.status)},[t._v(t._s(o.status))]),a("span",{staticClass:"analise-data"},[t._v(t._s(t.formatDate(o.criado_em)))])]),a("div",{staticClass:"analise-conteudo"},[a("p",[t._v(t._s(o.parecer))])])])}))],2):t._e()]):a("div",{staticClass:"not-found"},[a("p",[t._v("Produto não encontrado ou você não tem permissão para visualizá-lo.")]),a("button",{staticClass:"btn-secondary",on:{click:t.voltar}},[t._v("Voltar")])])])},tt=[];const at={name:"AnaliseProduto",props:{id:{type:String,required:!0}},data(){return{produto:null,documentos:[],analisesAnteriores:[],analise:{parecer:"",status:""},loading:!0,submitting:!1}},created(){this.carregarDados()},methods:{async carregarDados(){try{this.loading=!0;const{data:t,error:a}=await g.from("produtos").select("*").eq("id",this.id).single();if(a)throw a;this.produto=t;const{data:o,error:e}=await g.from("documentos").select("*").eq("produto_id",this.id);if(e)throw e;this.documentos=o||[];const{data:r,error:s}=await g.from("analises").select("*").eq("produto_id",this.id).order("criado_em",{ascending:!1});if(s)throw s;this.analisesAnteriores=r||[]}catch(t){console.error("Erro ao carregar dados:",t),alert("Erro ao carregar dados do produto. Por favor, tente novamente.")}finally{this.loading=!1}},async salvarAnalise(){try{this.submitting=!0;const{error:t}=await g.from("analises").insert({produto_id:this.id,tenant_id:this.produto.tenant_id,avaliador_id:"temp-avaliador-id",parecer:this.analise.parecer,status:this.analise.status});if(t)throw t;const{error:a}=await g.from("produtos").update({status:this.analise.status}).eq("id",this.id);if(a)throw a;alert("Análise salva com sucesso!"),await this.carregarDados(),this.analise={parecer:"",status:""}}catch(t){console.error("Erro ao salvar análise:",t),alert("Erro ao salvar análise. Por favor, tente novamente.")}finally{this.submitting=!1}},formatDate(t){if(!t)return"";const a=new Date(t);return a.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},getStatusClass(t){switch(t){case"aprovado":return"status-aprovado";case"pendente":return"status-pendente";case"reprovado":return"status-reprovado";default:return""}},voltar(){this.$router.push("/dashboard")}}},ot=at;var et=(0,i.A)(ot,W,tt,!1,null,"1c023441",null);const rt=et.exports,st={name:"Analise",components:{AnaliseProduto:rt},computed:{produtoId(){return this.$route.params.id}},methods:{async logout(){try{await g.auth.signOut(),this.$router.push("/")}catch(t){console.error("Erro ao fazer logout:",t)}}}},it=st;var nt=(0,i.A)(it,X,K,!1,null,"5aa364ad",null);const lt=nt.exports;var dt=function(){var t=this,a=t._self._c;return a("div",{staticClass:"catalogo-view"},[a("header",{staticClass:"app-header"},[t._m(0),a("nav",{staticClass:"main-nav"},[a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Cadastrar Produto")]),a("router-link",{attrs:{to:"/catalogo"}},[t._v("Catálogo")]),a("router-link",{attrs:{to:"/feedback"}},[t._v("RDM")])],1),a("div",{staticClass:"user-menu"},[a("button",{staticClass:"btn-logout",on:{click:t.logout}},[t._v("Sair")])])]),a("main",{staticClass:"main-content"},[a("CatalogoEletronico")],1)])},ct=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"logo"},[a("h1",[t._v("Comprar Bem")])])}],ut=function(){var t=this,a=t._self._c;return a("div",{staticClass:"catalogo-container"},[a("h2",[t._v("Catálogo Eletrônico de Bens Padronizados")]),a("div",{staticClass:"search-filters"},[a("div",{staticClass:"search-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{type:"text",placeholder:"Buscar produto..."},domProps:{value:t.searchTerm},on:{input:[function(a){a.target.composing||(t.searchTerm=a.target.value)},t.filtrarProdutos]}})]),a("div",{staticClass:"filters"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.filtroCategoria,expression:"filtroCategoria"}],on:{change:[function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.filtroCategoria=a.target.multiple?o:o[0]},t.filtrarProdutos]}},[a("option",{attrs:{value:""}},[t._v("Todas as categorias")]),t._l(t.categorias,(function(o){return a("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.nome)+" ")])}))],2)])]),t.produtosFiltrados.length>0?a("div",{staticClass:"produtos-grid"},t._l(t.produtosFiltrados,(function(o){return a("div",{key:o.id,staticClass:"produto-card",on:{click:function(a){return t.verDetalhesProduto(o.id)}}},[a("div",{staticClass:"produto-info"},[a("h3",[t._v(t._s(o.nome))]),a("p",[a("strong",[t._v("Marca:")]),t._v(" "+t._s(o.marca))]),a("p",[a("strong",[t._v("Modelo:")]),t._v(" "+t._s(o.modelo))]),a("p",[a("strong",[t._v("Fabricante:")]),t._v(" "+t._s(o.fabricante))])]),a("div",{staticClass:"produto-status",class:t.getStatusClass(o.status)},[t._v(" "+t._s(o.status)+" ")])])})),0):a("div",{staticClass:"empty-state"},[a("p",[t._v("Nenhum produto encontrado.")])]),t.produtoSelecionado?a("div",{staticClass:"produto-modal",on:{click:function(a){return a.target!==a.currentTarget?null:t.fecharModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h3",[t._v(t._s(t.produtoSelecionado.nome))]),a("button",{staticClass:"btn-close",on:{click:t.fecharModal}},[t._v("×")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"produto-detalhes"},[a("p",[a("strong",[t._v("Marca:")]),t._v(" "+t._s(t.produtoSelecionado.marca))]),a("p",[a("strong",[t._v("Modelo:")]),t._v(" "+t._s(t.produtoSelecionado.modelo))]),a("p",[a("strong",[t._v("Fabricante:")]),t._v(" "+t._s(t.produtoSelecionado.fabricante))]),a("p",[a("strong",[t._v("CNPJ:")]),t._v(" "+t._s(t.produtoSelecionado.cnpj))]),t.produtoSelecionado.descricao?a("p",[a("strong",[t._v("Descrição:")]),t._v(" "+t._s(t.produtoSelecionado.descricao))]):t._e(),a("p",[a("strong",[t._v("Status:")]),t._v(" "),a("span",{class:t.getStatusClass(t.produtoSelecionado.status)},[t._v(t._s(t.produtoSelecionado.status))])]),t.documentos.length>0?a("div",{staticClass:"documentos"},[a("h4",[t._v("Documentos")]),a("ul",t._l(t.documentos,(function(o){return a("li",{key:o.id},[a("a",{attrs:{href:o.arquivo_url,target:"_blank"}},[t._v(t._s(o.nome))])])})),0)]):t._e()])])])]):t._e()])},vt=[];const pt={name:"CatalogoEletronico",data(){return{produtos:[],produtosFiltrados:[],categorias:[],searchTerm:"",filtroCategoria:"",produtoSelecionado:null,documentos:[]}},created(){this.carregarDados()},methods:{async carregarDados(){try{const{data:t,error:a}=await g.from("produtos").select("*").eq("status","aprovado").order("nome");if(a)throw a;this.produtos=t||[],this.produtosFiltrados=[...this.produtos];const{data:o,error:e}=await g.from("categorias").select("*").order("nome");if(e)throw e;this.categorias=o||[]}catch(t){console.error("Erro ao carregar dados:",t),alert("Erro ao carregar dados. Por favor, tente novamente.")}},filtrarProdutos(){this.produtosFiltrados=this.produtos.filter((t=>{const a=""===this.searchTerm.trim()||t.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||t.marca.toLowerCase().includes(this.searchTerm.toLowerCase())||t.modelo.toLowerCase().includes(this.searchTerm.toLowerCase()),o=""===this.filtroCategoria||t.categoria_id===this.filtroCategoria;return a&&o}))},async verDetalhesProduto(t){try{const{data:a,error:o}=await g.from("produtos").select("*").eq("id",t).single();if(o)throw o;this.produtoSelecionado=a;const{data:e,error:r}=await g.from("documentos").select("*").eq("produto_id",t);if(r)throw r;this.documentos=e||[]}catch(a){console.error("Erro ao carregar detalhes do produto:",a)}},fecharModal(){this.produtoSelecionado=null,this.documentos=[]},getStatusClass(t){switch(t){case"aprovado":return"status-aprovado";case"pendente":return"status-pendente";case"reprovado":return"status-reprovado";default:return""}}}},mt=pt;var ft=(0,i.A)(mt,ut,vt,!1,null,"239970c6",null);const ht=ft.exports,_t={name:"Catalogo",components:{CatalogoEletronico:ht},methods:{async logout(){try{await g.auth.signOut(),this.$router.push("/")}catch(t){console.error("Erro ao fazer logout:",t)}}}},gt=_t;var Ct=(0,i.A)(gt,dt,ct,!1,null,"bfbc00c8",null);const bt=Ct.exports;var yt=function(){var t=this,a=t._self._c;return a("div",{staticClass:"feedback-view"},[a("header",{staticClass:"app-header"},[t._m(0),a("nav",{staticClass:"main-nav"},[a("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Cadastrar Produto")]),a("router-link",{attrs:{to:"/catalogo"}},[t._v("Catálogo")]),a("router-link",{attrs:{to:"/feedback"}},[t._v("RDM")])],1),a("div",{staticClass:"user-menu"},[a("button",{staticClass:"btn-logout",on:{click:t.logout}},[t._v("Sair")])])]),a("main",{staticClass:"main-content"},[a("FormularioRDM")],1)])},wt=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"logo"},[a("h1",[t._v("Comprar Bem")])])}],kt=function(){var t=this,a=t._self._c;return a("div",{staticClass:"rdm-container"},[a("h2",[t._v("Relatório de Desempenho de Material (RDM)")]),a("form",{on:{submit:function(a){return a.preventDefault(),t.enviarFeedback.apply(null,arguments)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"produto"}},[t._v("Produto*")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.feedback.produto_id,expression:"feedback.produto_id"}],attrs:{id:"produto",required:""},on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.feedback,"produto_id",a.target.multiple?o:o[0])}}},[a("option",{attrs:{value:""}},[t._v("Selecione o produto...")]),t._l(t.produtos,(function(o){return a("option",{key:o.id,domProps:{value:o.id}},[t._v(" "+t._s(o.nome)+" - "+t._s(o.marca)+" - "+t._s(o.modelo)+" ")])}))],2)]),a("div",{staticClass:"form-group"},[a("label",[t._v("Avaliação*")]),a("div",{staticClass:"avaliacao"},t._l(5,(function(o){return a("div",{key:o,staticClass:"estrela",class:{ativa:t.feedback.avaliacao>=o},on:{click:function(a){t.feedback.avaliacao=o}}},[t._v(" ★ ")])})),0)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comentario"}},[t._v("Descreva o problema ou feedback*")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.feedback.comentario,expression:"feedback.comentario"}],attrs:{id:"comentario",rows:"4",placeholder:"Ex: Equipamento apresentou falha após 3 meses de uso...",required:""},domProps:{value:t.feedback.comentario},on:{input:function(a){a.target.composing||t.$set(t.feedback,"comentario",a.target.value)}}})]),a("div",{staticClass:"form-actions"},[a("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:t.loading}},[t._v(" "+t._s(t.loading?"Enviando...":"Enviar Feedback")+" ")])])])])},Pt=[];const At={name:"FormularioRDM",data(){return{feedback:{produto_id:"",avaliacao:0,comentario:""},produtos:[],loading:!1}},created(){this.carregarProdutos()},methods:{async carregarProdutos(){try{const{data:t,error:a}=await g.from("produtos").select("*").eq("status","aprovado").order("nome");if(a)throw a;this.produtos=t||[]}catch(t){console.error("Erro ao carregar produtos:",t),alert("Erro ao carregar produtos. Por favor, tente novamente.")}},async enviarFeedback(){if(0!==this.feedback.avaliacao)try{this.loading=!0;const{error:t}=await g.from("rdm_feedbacks").insert({produto_id:this.feedback.produto_id,usuario_id:"temp-user-id",tenant_id:"123e4567-e89b-12d3-a456-426614174000",avaliacao:this.feedback.avaliacao,comentario:this.feedback.comentario});if(t)throw t;alert("Feedback enviado com sucesso!"),this.limparFormulario()}catch(t){console.error("Erro ao enviar feedback:",t),alert("Erro ao enviar feedback. Por favor, tente novamente.")}finally{this.loading=!1}else alert("Por favor, selecione uma avaliação de 1 a 5 estrelas.")},limparFormulario(){this.feedback={produto_id:"",avaliacao:0,comentario:""}}}},St=At;var Dt=(0,i.A)(St,kt,Pt,!1,null,"51baad86",null);const Et=Dt.exports,xt={name:"Feedback",components:{FormularioRDM:Et},methods:{async logout(){try{await g.auth.signOut(),this.$router.push("/")}catch(t){console.error("Erro ao fazer logout:",t)}}}},Nt=xt;var qt=(0,i.A)(Nt,yt,wt,!1,null,"2dd122e3",null);const Mt=qt.exports;e.Ay.use(c.Ay);const Ft=[{path:"/",name:"Home",component:S,meta:{requiresAuth:!1}},{path:"/dashboard",name:"Dashboard",component:L,meta:{requiresAuth:!0}},{path:"/cadastro",name:"Cadastro",component:H,meta:{requiresAuth:!0}},{path:"/analise/:id",name:"Analise",component:lt,meta:{requiresAuth:!0}},{path:"/catalogo",name:"Catalogo",component:bt,meta:{requiresAuth:!0}},{path:"/feedback",name:"Feedback",component:Mt,meta:{requiresAuth:!0}}],jt=new c.Ay({mode:"history",base:"/",routes:Ft});jt.beforeEach((async(t,a,o)=>{const e=g.auth.user(),r=t.matched.some((t=>t.meta.requiresAuth));r&&!e?o("/"):o()}));const Ot=jt;var Tt=o(353);e.Ay.use(Tt.Ay);const $t=new Tt.Ay.Store({state:{user:null,tenant:null,isLoading:!1},mutations:{SET_USER(t,a){t.user=a},SET_TENANT(t,a){t.tenant=a},SET_LOADING(t,a){t.isLoading=a}},actions:{async fetchUser({commit:t}){const a=g.auth.user();if(t("SET_USER",a),a){const{data:o,error:e}=await g.from("tenants").select("*").eq("id",a.user_metadata?.tenant_id).single();!e&&o&&t("SET_TENANT",o)}},setLoading({commit:t},a){t("SET_LOADING",a)}},getters:{isAuthenticated:t=>!!t.user,currentUser:t=>t.user,currentTenant:t=>t.tenant,isLoading:t=>t.isLoading}});var Lt=o(640),It=o(201),Rt=o.n(It);e.Ay.config.productionTip=!1,e.Ay.use(Lt.A),e.Ay.use(Rt()),new e.Ay({router:Ot,store:$t,render:t=>t(d)}).$mount("#app")}},a={};function o(e){var r=a[e];if(void 0!==r)return r.exports;var s=a[e]={exports:{}};return t[e].call(s.exports,s,s.exports,o),s.exports}o.m=t,(()=>{var t=[];o.O=(a,e,r,s)=>{if(!e){var i=1/0;for(c=0;c<t.length;c++){for(var[e,r,s]=t[c],n=!0,l=0;l<e.length;l++)(!1&s||i>=s)&&Object.keys(o.O).every((t=>o.O[t](e[l])))?e.splice(l--,1):(n=!1,s<i&&(i=s));if(n){t.splice(c--,1);var d=r();void 0!==d&&(a=d)}}return a}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[e,r,s]}})(),(()=>{o.n=t=>{var a=t&&t.__esModule?()=>t["default"]:()=>t;return o.d(a,{a}),a}})(),(()=>{var t,a=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"===typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"===typeof e.then)return e}var s=Object.create(null);o.r(s);var i={};t=t||[null,a({}),a([]),a(a)];for(var n=2&r&&e;"object"==typeof n&&!~t.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((t=>i[t]=()=>e[t]));return i["default"]=()=>e,o.d(s,i),s}})(),(()=>{o.d=(t,a)=>{for(var e in a)o.o(a,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})}})(),(()=>{o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((a,e)=>(o.f[e](t,a),a)),[]))})(),(()=>{o.u=t=>"js/"+t+".fd9cb239.js"})(),(()=>{o.miniCssF=t=>{}})(),(()=>{o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{o.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a)})(),(()=>{var t={},a="comprar-bem:";o.l=(e,r,s,i)=>{if(t[e])t[e].push(r);else{var n,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+s){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",a+s),n.src=e),t[e]=[r];var v=(a,o)=>{n.onerror=n.onload=null,clearTimeout(p);var r=t[e];if(delete t[e],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((t=>t(o))),a)return a(o)},p=setTimeout(v.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=v.bind(null,n.onerror),n.onload=v.bind(null,n.onload),l&&document.head.appendChild(n)}}})(),(()=>{o.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{o.p="/"})(),(()=>{var t={524:0};o.f.j=(a,e)=>{var r=o.o(t,a)?t[a]:void 0;if(0!==r)if(r)e.push(r[2]);else{var s=new Promise(((o,e)=>r=t[a]=[o,e]));e.push(r[2]=s);var i=o.p+o.u(a),n=new Error,l=e=>{if(o.o(t,a)&&(r=t[a],0!==r&&(t[a]=void 0),r)){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;n.message="Loading chunk "+a+" failed.\n("+s+": "+i+")",n.name="ChunkLoadError",n.type=s,n.request=i,r[1](n)}};o.l(i,l,"chunk-"+a,a)}},o.O.j=a=>0===t[a];var a=(a,e)=>{var r,s,[i,n,l]=e,d=0;if(i.some((a=>0!==t[a]))){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(l)var c=l(o)}for(a&&a(e);d<i.length;d++)s=i[d],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},e=self["webpackChunkcomprar_bem"]=self["webpackChunkcomprar_bem"]||[];e.forEach(a.bind(null,0)),e.push=a.bind(null,e.push.bind(e))})();var e=o.O(void 0,[504],(()=>o(173)));e=o.O(e)})();
//# sourceMappingURL=app.98a3e6b0.js.map