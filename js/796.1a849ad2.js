"use strict";(self["webpackChunkcomprar_bem"]=self["webpackChunkcomprar_bem"]||[]).push([[796],{1796:(a,s,t)=>{t.r(s),t.d(s,{default:()=>l});var o=function(){var a=this,s=a._self._c;return s("div",{staticClass:"validar-dcb-container"},[a._m(0),s("div",{staticClass:"validacao-content"},[a.loading?s("div",{staticClass:"loading-state"},[s("div",{staticClass:"spinner"}),s("h3",[a._v("üîç Validando DCB...")]),s("p",[a._v("Verificando autenticidade do documento DCB "+a._s(a.numeroCompleto))])]):a.dcb&&!a.erro?s("div",{staticClass:"dcb-valido"},[a._m(1),s("div",{staticClass:"dcb-detalhes"},[s("div",{staticClass:"dcb-header"},[s("h3",[a._v("üìú DECLARA√á√ÉO DE CONFORMIDADE DE BEM")]),s("div",{staticClass:"numero-dcb"},[a._v("DCB N¬∫ "+a._s(a.numeroCompleto))])]),s("div",{staticClass:"informacoes-grid"},[s("div",{staticClass:"info-section"},[s("h4",[a._v("üì¶ PRODUTO CERTIFICADO")]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Nome:")]),s("span",{staticClass:"value"},[a._v(a._s(a.dcb.produto_nome))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Marca:")]),s("span",{staticClass:"value"},[a._v(a._s(a.dcb.produto_marca))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Modelo:")]),s("span",{staticClass:"value"},[a._v(a._s(a.dcb.produto_modelo||"N/A"))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Fabricante:")]),s("span",{staticClass:"value"},[a._v(a._s(a.dcb.produto_fabricante))])])]),s("div",{staticClass:"info-section"},[s("h4",[a._v("üìã DADOS DO CERTIFICADO")]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Data de Emiss√£o:")]),s("span",{staticClass:"value"},[a._v(a._s(a.formatDate(a.dcb.data_emissao)))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Validade:")]),s("span",{staticClass:"value"},[a._v(a._s(a.formatDate(a.dcb.data_validade)))])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Status:")]),s("span",{staticClass:"value status",class:a.getStatusClass(a.dcb.status)},[a._v(" "+a._s(a.formatStatus(a.dcb.status))+" ")])]),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[a._v("Situa√ß√£o:")]),s("span",{staticClass:"value",class:a.getSituacaoClass()},[a._v(" "+a._s(a.getSituacao())+" ")])])])]),s("div",{staticClass:"declaracao-oficial"},[s("h4",[a._v("‚öñÔ∏è DECLARA√á√ÉO DE CONFORMIDADE")]),a._m(2),a._m(3),s("p",{staticClass:"conformidade-status"},[s("strong",[a._v("Status de Conformidade:")]),s("span",{class:a.verificarConformidadeLegal()?"conforme":"nao-conforme"},[a._v(" "+a._s(a.verificarConformidadeLegal()?"‚úÖ CONFORME":"‚ùå N√ÉO CONFORME")+" ")])])]),a.dcb.hash_documento?s("div",{staticClass:"seguranca-section"},[s("h4",[a._v("üîí VERIFICA√á√ÉO DE SEGURAN√áA")]),s("div",{staticClass:"verificacao-item"},[s("span",{staticClass:"label"},[a._v("Integridade do Documento:")]),s("span",{staticClass:"value",class:a.dcb.integridade_verificada?"verificado":"nao-verificado"},[a._v(" "+a._s(a.dcb.integridade_verificada?"‚úÖ VERIFICADA":"‚ö†Ô∏è N√ÉO VERIFICADA")+" ")])]),a.dcb.alerta_seguranca?s("div",{staticClass:"alerta-seguranca"},[a._v(" ‚ö†Ô∏è "+a._s(a.dcb.alerta_seguranca)+" ")]):a._e(),s("div",{staticClass:"hash-info"},[s("small",[a._v("Hash SHA-256: "+a._s(a.dcb.hash_documento?.substring(0,16))+"...")])])]):a._e()])]):a.erro?s("div",{staticClass:"dcb-invalido"},[a._m(4),s("div",{staticClass:"erro-detalhes"},[s("h4",[a._v("üîç N√∫mero pesquisado: "+a._s(a.numeroCompleto))]),a._m(5)])]):a._e(),a._m(6)]),s("div",{staticClass:"rodape-oficial"},[a._m(7),s("small",[a._v("Consulta realizada em "+a._s((new Date).toLocaleString("pt-BR")))])])])},i=[function(){var a=this,s=a._self._c;return s("div",{staticClass:"header-oficial"},[s("div",{staticClass:"brasao"},[a._v("üè•")]),s("div",{staticClass:"header-text"},[s("h1",[a._v("SISTEMA COMPRAR BEM")]),s("h2",[a._v("VALIDA√á√ÉO DE DCB")]),s("h3",[a._v("Declara√ß√£o de Conformidade de Bem")])])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"status-validacao valido"},[s("div",{staticClass:"status-icon"},[a._v("‚úÖ")]),s("h2",[a._v("DCB V√ÅLIDO E AUT√äNTICO")]),s("p",[a._v("Este documento foi emitido oficialmente pela CPM")])])},function(){var a=this,s=a._self._c;return s("p",[a._v(" Este documento certifica que o produto foi submetido √† an√°lise t√©cnica pela Comiss√£o de Padroniza√ß√£o de Materiais (CPM) e foi "),s("strong",[a._v("APROVADO")]),a._v(" para utiliza√ß√£o em processos licitat√≥rios, conforme: ")])},function(){var a=this,s=a._self._c;return s("ul",{staticClass:"legislacao-list"},[s("li",[a._v("Lei Federal n¬∫ 14.133/2021 (Lei de Licita√ß√µes e Contratos)")]),s("li",[a._v('Programa "Comprar Bem - Compras P√∫blicas Inteligentes"')]),s("li",[a._v("Normas t√©cnicas espec√≠ficas da categoria do produto")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"status-validacao invalido"},[s("div",{staticClass:"status-icon"},[a._v("‚ùå")]),s("h2",[a._v("DCB N√ÉO ENCONTRADO")]),s("p",[a._v("O n√∫mero de DCB informado n√£o foi localizado em nossa base de dados")])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"possibilidades"},[s("h5",[a._v("Poss√≠veis causas:")]),s("ul",[s("li",[a._v("N√∫mero de DCB digitado incorretamente")]),s("li",[a._v("DCB ainda n√£o emitido ou cancelado")]),s("li",[a._v("Documento fraudulento")])])])},function(){var a=this,s=a._self._c;return s("div",{staticClass:"instrucoes"},[s("h4",[a._v("‚ÑπÔ∏è Como usar esta valida√ß√£o")]),s("div",{staticClass:"instrucoes-grid"},[s("div",{staticClass:"instrucao"},[s("div",{staticClass:"instrucao-icon"},[a._v("üì±")]),s("h5",[a._v("QR Code")]),s("p",[a._v("Escaneie o QR Code no documento PDF oficial")])]),s("div",{staticClass:"instrucao"},[s("div",{staticClass:"instrucao-icon"},[a._v("üîó")]),s("h5",[a._v("Link Direto")]),s("p",[a._v("Acesse via link fornecido no documento")])]),s("div",{staticClass:"instrucao"},[s("div",{staticClass:"instrucao-icon"},[a._v("üîí")]),s("h5",[a._v("Seguran√ßa")]),s("p",[a._v("Verifica√ß√£o oficial pela CPM em tempo real")])])])])},function(){var a=this,s=a._self._c;return s("p",[a._v(" Sistema ComprarBem - Plataforma Oficial de Pr√©-Qualifica√ß√£o de Bens"),s("br"),a._v(" Minist√©rio da Sa√∫de - Comiss√£o de Padroniza√ß√£o de Materiais (CPM) ")])}],e=t(452);const c={name:"ValidarDCB",props:{numero:String,ano:String},data(){return{dcb:null,loading:!0,erro:!1}},computed:{numeroCompleto(){return`${this.numero}/${this.ano}`}},async mounted(){console.log("=== ValidarDCB MOUNTED ==="),console.log("Numero:",this.numero),console.log("Ano:",this.ano),console.log("Numero completo:",this.numeroCompleto),await this.buscarDCB()},methods:{async buscarDCB(){try{this.loading=!0,this.erro=!1,console.log("Buscando DCB:",this.numeroCompleto);const{data:a,error:s}=await e.ND.from("dcb_certificados").select("*").eq("numero_dcb",this.numeroCompleto).single();if(console.log("Resposta do Supabase - error:",s),console.log("Resposta do Supabase - data:",a),s)return console.error("‚ùå Erro ao buscar DCB:",s),void(this.erro=!0);if(!a)return console.log("‚ùå Nenhum DCB encontrado para:",this.numeroCompleto),void(this.erro=!0);let t=null;if(a.produto_id){console.log("Buscando produto com ID:",a.produto_id);const{data:s,error:o}=await e.ND.from("produtos").select("nome, marca, modelo, fabricante, cnpj").eq("id",a.produto_id).single();!o&&s?(t=s,console.log("‚úÖ Produto encontrado:",s)):console.log("‚ö†Ô∏è Produto n√£o encontrado:",o)}this.dcb={...a,produto_nome:t?.nome||"Produto Certificado",produto_marca:t?.marca||"Marca Certificada",produto_modelo:t?.modelo||"N/A",produto_fabricante:t?.fabricante||"Fabricante Certificado",produto_cnpj:t?.cnpj||"N/A"},console.log("‚úÖ DCB montado com sucesso:",this.dcb),a.hash_documento&&await this.verificarIntegridade(a)}catch(a){console.error("‚ùå Erro geral na valida√ß√£o:",a),this.erro=!0}finally{this.loading=!1}},formatDate(a){return a?new Date(a).toLocaleDateString("pt-BR"):"N/A"},formatStatus(a){const s={ativo:"ATIVO",revogado:"REVOGADO",vencido:"VENCIDO"};return s[a]||a.toUpperCase()},getStatusClass(a){return{"status-ativo":"ativo"===a,"status-revogado":"revogado"===a,"status-vencido":"vencido"===a}},getSituacao(){if(!this.dcb)return"N/A";const a=new Date,s=new Date(this.dcb.data_validade);return"ativo"!==this.dcb.status?"INV√ÅLIDO PARA USO":s<a?"VENCIDO":"V√ÅLIDO PARA LICITA√á√ïES"},getSituacaoClass(){const a=this.getSituacao();return{"situacao-valido":"V√ÅLIDO PARA LICITA√á√ïES"===a,"situacao-vencido":"VENCIDO"===a,"situacao-invalido":"INV√ÅLIDO PARA USO"===a}},async verificarIntegridade(a){try{const s={numero_dcb:a.numero_dcb,produto_id:a.produto_id,data_emissao:a.data_emissao,data_validade:a.data_validade},t=await this.calcularHash(JSON.stringify(s));t!==a.hash_documento?(console.warn("‚ö†Ô∏è ALERTA: Hash do documento n√£o confere - poss√≠vel altera√ß√£o"),this.dcb.integridade_verificada=!1,this.dcb.alerta_seguranca="Documento pode ter sido alterado"):(console.log("‚úÖ Integridade do documento verificada"),this.dcb.integridade_verificada=!0)}catch(s){console.error("Erro na verifica√ß√£o de integridade:",s),this.dcb.integridade_verificada=!1}},async calcularHash(a){const s=new TextEncoder,t=s.encode(a),o=await crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(o));return i.map((a=>a.toString(16).padStart(2,"0"))).join("")},verificarConformidadeLegal(){if(!this.dcb)return!1;const a={numero_dcb:!!this.dcb.numero_dcb,data_emissao:!!this.dcb.data_emissao,data_validade:!!this.dcb.data_validade,produto_identificado:!(!this.dcb.produto_nome||!this.dcb.produto_marca),dentro_validade:new Date(this.dcb.data_validade)>new Date,status_ativo:"ativo"===this.dcb.status};return Object.values(a).every((a=>!0===a))},getNumeroReferencia(){return this.dcb?`DCB n¬∫ ${this.dcb.numero_dcb}`:""}}},d=c;var r=t(1656),n=(0,r.A)(d,o,i,!1,null,"0523512a",null);const l=n.exports}}]);
//# sourceMappingURL=796.1a849ad2.js.map